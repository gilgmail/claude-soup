{"ast":null,"code":"// src/services/aiService.js\n\nclass AIService {\n  constructor() {\n    // 模擬 AI API 配置\n    this.baseURL = 'https://api.openai.com/v1';\n    this.apiKey = process.env.REACT_APP_OPENAI_API_KEY || '';\n\n    // 生人文案主題庫\n    this.copywritingThemes = {\n      product: {\n        keywords: ['品質', '創新', '價值', '體驗', '信賴', '專業', '卓越', '突破'],\n        scenarios: ['產品發布', '品牌故事', '用戶見證', '技術優勢', '市場領導'],\n        hooks: ['你知道嗎？', '想像一下...', '有沒有想過', '是時候了', '別再等了']\n      },\n      service: {\n        keywords: ['專業', '貼心', '效率', '解決', '支援', '服務', '滿意', '安心'],\n        scenarios: ['服務介紹', '客戶案例', '問題解決', '專業諮詢', '售後保障'],\n        hooks: ['為什麼選擇我們？', '讓我們來幫您', '您的需求我們懂', '專業團隊為您服務', '一站式解決方案']\n      },\n      lifestyle: {\n        keywords: ['生活', '品味', '享受', '質感', '美好', '精緻', '優雅', '舒適'],\n        scenarios: ['生活方式', '品味提升', '休閒娛樂', '居家生活', '個人風格'],\n        hooks: ['生活可以更美好', '品味從選擇開始', '給自己一個理由', '值得擁有的美好', '讓生活更精彩']\n      },\n      business: {\n        keywords: ['商機', '成長', '效益', '投資', '收益', '策略', '競爭', '優勢'],\n        scenarios: ['商業機會', '投資方案', '合作提案', '市場分析', '競爭優勢'],\n        hooks: ['抓住商機', '投資未來', '合作共贏', '領先競爭', '創造價值']\n      }\n    };\n\n    // 文案結構模板庫\n    this.copyTemplates = {\n      hooks: [\"你是否曾經想過{問題}？\", \"在{場景}中，最重要的是什麼？\", \"為什麼{目標對象}都選擇{解決方案}？\", \"如果有一個方法能讓你{期望結果}...\", \"想像一下{理想情境}的感覺\"],\n      benefits: [\"不僅僅是{基本功能}，更是{深層價值}\", \"從{現況}到{理想狀態}的完美轉換\", \"讓{目標}變得{形容詞}又{形容詞}\", \"專為{目標對象}量身打造的{解決方案}\"],\n      proofs: [\"超過{數字}的用戶見證了{效果}\", \"經過{時間}的市場驗證\", \"{權威機構}認證推薦\", \"成功案例遍布{範圍}\"],\n      actions: [\"現在就開始{行動}，改變從今天開始\", \"把握{時機}，機會不等人\", \"加入{群體}，一起{目標}\", \"聯繫我們，讓專業為您{服務內容}\"]\n    };\n  }\n\n  // 模擬 AI 增強的文案生成\n  async enhanceCopywriting(topic, theme, tone, wordCount = 800) {\n    try {\n      // 模擬 API 延遲\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      const longFormContent = this.generateLongFormCopywriting(topic, theme, tone, wordCount);\n      const suggestions = this.generateCopywritingSuggestions(topic, theme);\n      const structureAnalysis = this.analyzeCopywritingStructure(longFormContent);\n      return {\n        copywriting: longFormContent,\n        suggestions: suggestions,\n        structureAnalysis: structureAnalysis,\n        confidence: Math.floor(Math.random() * 20) + 80,\n        // 80-100% 信心度\n        aiGenerated: true\n      };\n    } catch (error) {\n      console.error('AI 增強失敗:', error);\n      // 回退到基本功能\n      return this.fallbackEnhancement(topic, theme, tone);\n    }\n  }\n\n  // 生成長文案內容\n  generateLongFormCopywriting(topic, theme, tone, wordCount) {\n    const themeData = this.copywritingThemes[theme] || this.copywritingThemes.product;\n    const hooks = themeData.hooks || themeData.keywords;\n    const scenarios = themeData.scenarios;\n    const structure = {\n      headline: this.generateHeadline(topic, theme, hooks),\n      introduction: this.generateIntroduction(topic, theme, tone),\n      mainContent: this.generateMainContent(topic, theme, scenarios, wordCount),\n      benefits: this.generateBenefitsList(topic, theme),\n      proof: this.generateSocialProof(topic, theme),\n      conclusion: this.generateConclusion(topic, tone),\n      cta: this.generateCTA(topic, tone)\n    };\n    return structure;\n  }\n\n  // 生成標題\n  generateHeadline(topic, theme, hooks) {\n    const headlines = [`革新${topic}體驗，創造無限可能`, `專業${topic}解決方案，值得信賴的選擇`, `${topic}新標準，引領行業變革`, `選擇優質${topic}，投資美好未來`];\n    return headlines[Math.floor(Math.random() * headlines.length)];\n  }\n\n  // 生成介紹段落\n  generateIntroduction(topic, theme, tone) {\n    const intros = {\n      professional: `在當今競爭激烈的市場環境中，選擇合適的${topic}至關重要。我們深入了解客戶需求，致力於提供最專業的解決方案。`,\n      friendly: `你好！很高興與你分享關於${topic}的精彩內容。讓我們一起探索這個充滿機會的領域吧！`,\n      urgent: `機會稍縱即逝！現在正是選擇優質${topic}的最佳時機。不要讓猶豫成為成功路上的絆腳石。`,\n      creative: `想像一個全新的${topic}世界，在這裡，創新與品質完美融合，每一個細節都在訴說著卓越的故事。`\n    };\n    return intros[tone] || intros.professional;\n  }\n\n  // 生成主要內容\n  generateMainContent(topic, theme, scenarios, targetWords) {\n    const baseContent = scenarios.map(scenario => {\n      return `在${scenario}領域，我們的${topic}展現出卓越的表現。通過深入的市場研究和技術創新，我們不斷提升產品品質，確保能夠滿足各種複雜需求。我們的專業團隊擁有豐富的行業經驗，能夠為客戶提供量身訂製的解決方案。`;\n    });\n\n    // 擴展內容以達到目標字數\n    const expandedContent = [];\n    const wordsPerSection = Math.ceil(targetWords * 0.6 / baseContent.length); // 主內容佔 60%\n\n    baseContent.forEach((content, index) => {\n      let expandedSection = content;\n\n      // 根據主題添加特定內容\n      switch (theme) {\n        case 'product':\n          expandedSection += `我們的${topic}採用先進的製造工藝和優質材料，確保產品的耐用性和可靠性。每一個產品都經過嚴格的品質檢測，只有達到我們嚴苛標準的產品才能與客戶見面。`;\n          break;\n        case 'service':\n          expandedSection += `我們的服務團隊24小時待命，隨時準備為客戶解決各種${topic}相關問題。我們相信，優質的服務是建立長期合作關係的基礎。`;\n          break;\n        case 'lifestyle':\n          expandedSection += `選擇我們的${topic}，就是選擇一種更加精緻的生活方式。我們注重每一個細節，力求為您創造最舒適的使用體驗。`;\n          break;\n        case 'business':\n          expandedSection += `在商業環境中，效率與成本控制同樣重要。我們的${topic}方案能夠幫助企業優化流程，提高工作效率，同時降低營運成本。`;\n          break;\n      }\n      expandedContent.push(expandedSection);\n    });\n    return expandedContent.join('\\n\\n');\n  }\n\n  // 生成效益清單\n  generateBenefitsList(topic, theme) {\n    const benefits = {\n      product: [`高品質保證：每一個${topic}都經過嚴格品質控制`, `創新設計：融合最新技術與人性化設計理念`, `長期價值：投資於品質，享受長久效益`, `專業支援：完善的售前售後服務體系`],\n      service: [`專業團隊：由行業專家組成的服務團隊`, `客製化方案：根據客戶需求量身訂製`, `高效執行：標準化流程確保服務品質`, `持續優化：根據反饋不斷改進服務`],\n      lifestyle: [`品質生活：提升日常生活品質`, `個人風格：彰顯獨特品味與格調`, `舒適體驗：注重使用者感受`, `長期投資：品質選擇的持續回報`],\n      business: [`效率提升：優化業務流程`, `成本控制：有效降低營運成本`, `競爭優勢：在市場中保持領先`, `風險管理：專業的風險評估與控制`]\n    };\n    return benefits[theme] || benefits.product;\n  }\n\n  // 生成社會證明\n  generateSocialProof(topic, theme) {\n    const proofs = [`超過10,000名滿意客戶選擇了我們的${topic}`, `98%的客戶推薦率證明了我們的專業水準`, `榮獲多項行業認證與獎項`, `成功案例遍布各個行業領域`];\n    return proofs[Math.floor(Math.random() * proofs.length)];\n  }\n\n  // 生成結論\n  generateConclusion(topic, tone) {\n    const conclusions = {\n      professional: `綜合以上所述，選擇我們的${topic}是明智的投資決策。我們承諾為每一位客戶提供最優質的產品與服務。`,\n      friendly: `希望這些資訊對你有所幫助！如果你對我們的${topic}感興趣，歡迎隨時與我們聯繫。`,\n      urgent: `時間寶貴，機會難得！現在就採取行動，選擇我們的${topic}，開啟成功之路！`,\n      creative: `讓我們一起創造屬於你的${topic}傳奇故事，在這個充滿可能性的旅程中，我們將是你最可靠的夥伴。`\n    };\n    return conclusions[tone] || conclusions.professional;\n  }\n\n  // 生成行動號召\n  generateCTA(topic, tone) {\n    const ctas = {\n      professional: `立即聯繫我們的專業顧問，了解更多${topic}詳細資訊。`,\n      friendly: `想要了解更多嗎？歡迎與我們聊聊！`,\n      urgent: `機會有限！立即行動，把握${topic}優惠！`,\n      creative: `準備好開始你的${topic}冒險之旅了嗎？`\n    };\n    return ctas[tone] || ctas.professional;\n  }\n\n  // 生成文案建議\n  generateCopywritingSuggestions(topic, theme) {\n    return {\n      alternativeHeadlines: this.generateAlternativeHeadlines(topic, theme),\n      improvementTips: this.getCopywritingTips(theme),\n      relatedThemes: this.getRelatedThemes(theme),\n      keywordSuggestions: this.getKeywordSuggestions(topic, theme)\n    };\n  }\n\n  // 生成替代標題\n  generateAlternativeHeadlines(topic, theme) {\n    const alternatives = [`突破性${topic}解決方案`, `重新定義${topic}標準`, `專業${topic}，品質保證`, `創新${topic}，超越期待`, `值得信賴的${topic}夥伴`];\n    return alternatives.slice(0, 3);\n  }\n\n  // 獲取文案建議\n  getCopywritingTips(theme) {\n    const tips = {\n      product: ['強調產品的獨特賣點與競爭優勢', '加入具體的數據與事實支撐', '突出客戶使用後的具體效益'],\n      service: ['展示服務團隊的專業能力', '提供具體的服務流程說明', '強調客戶成功案例與見證'],\n      lifestyle: ['營造情感共鳴與美好想像', '強調生活品質的提升', '突出個人品味與風格'],\n      business: ['量化商業價值與投資回報', '提供行業分析與市場數據', '強調競爭優勢與風險控制']\n    };\n    return tips[theme] || tips.product;\n  }\n\n  // 獲取關鍵詞建議\n  getKeywordSuggestions(topic, theme) {\n    const themeData = this.copywritingThemes[theme] || this.copywritingThemes.product;\n    return themeData.keywords.slice(0, 5);\n  }\n\n  // 分析文案結構\n  analyzeCopywritingStructure(content) {\n    return {\n      structure: '完整的文案結構包含標題、介紹、主要內容、效益、證明、結論和行動號召',\n      readability: '內容結構清晰，邏輯性強，易於理解',\n      engagement: '採用多種修辭手法，增強讀者參與感',\n      persuasion: '運用說服力原則，有效引導讀者採取行動'\n    };\n  }\n\n  // 回退增強功能\n  fallbackEnhancement(topic, theme, tone) {\n    return {\n      copywriting: {\n        headline: `關於${topic}的專業方案`,\n        introduction: `我們為您提供優質的${topic}服務`,\n        mainContent: `專業、可靠、值得信賴的${topic}解決方案`,\n        benefits: ['專業服務', '品質保證', '客戶滿意'],\n        proof: '眾多客戶的信賴選擇',\n        conclusion: `選擇我們，選擇專業的${topic}服務`,\n        cta: '立即聯繫我們了解更多'\n      },\n      suggestions: {\n        alternativeHeadlines: ['建議功能暫時不可用'],\n        improvementTips: ['請稍後重試'],\n        relatedThemes: [],\n        keywordSuggestions: []\n      },\n      structureAnalysis: {\n        structure: '基本結構',\n        readability: '標準',\n        engagement: '一般',\n        persuasion: '普通'\n      },\n      confidence: 60,\n      aiGenerated: false\n    };\n  }\n\n  // 生成增強內容\n  generateEnhancedContent(quote, theme, tone) {\n    const themeData = this.inspirationalThemes[theme];\n    const randomKeyword = themeData.keywords[Math.floor(Math.random() * themeData.keywords.length)];\n    const randomScenario = themeData.scenarios[Math.floor(Math.random() * themeData.scenarios.length)];\n    const enhancedSections = {\n      intro: this.generateEnhancedIntro(theme, randomKeyword),\n      story: this.generateEnhancedStory(quote, theme, randomScenario),\n      closing: this.generateEnhancedClosing(tone, randomKeyword),\n      scenes: this.generateEnhancedScenes(theme, randomScenario)\n    };\n    return enhancedSections;\n  }\n\n  // 生成增強版開場白\n  generateEnhancedIntro(theme, keyword) {\n    const intros = {\n      success: [`在追求${keyword}的路上，每個人都有屬於自己的故事...`, `${keyword}從來不是偶然，而是來自日復一日的堅持...`, `什麼是真正的${keyword}？讓我們從一個故事開始說起...`],\n      growth: [`${keyword}是生命中最美麗的過程，就像破繭而出的蝴蝶...`, `每一次的${keyword}都在告訴我們，改變是可能的...`, `在${keyword}的道路上，沒有終點，只有不斷的超越...`],\n      courage: [`${keyword}不是沒有恐懼，而是即使恐懼仍然前行...`, `真正的${keyword}來自於面對未知的決心...`, `${keyword}是一種選擇，選擇相信自己的力量...`]\n    };\n    const themeIntros = intros[theme] || intros.success;\n    return themeIntros[Math.floor(Math.random() * themeIntros.length)];\n  }\n\n  // 生成增強版故事\n  generateEnhancedStory(quote, theme, scenario) {\n    return `想像一下${scenario}中的主角，面對重重困難時的內心掙扎。${quote} 這句話不僅僅是文字，更是一種信念的力量。當我們真正理解並實踐這句話時，我們會發現內在的潛能被喚醒，原本看似不可能的事情變得觸手可及。這就是信念的力量，這就是${scenario}背後真正的意義。`;\n  }\n\n  // 生成增強版結尾\n  generateEnhancedClosing(tone, keyword) {\n    const closings = {\n      inspirational: [`現在就是開始的最佳時機，讓${keyword}成為你前進的動力。`, `每一天都是新的開始，每一步都在創造屬於你的${keyword}故事。`, `相信自己，相信${keyword}的力量，你的未來從現在開始改寫。`],\n      motivational: [`行動起來吧！讓${keyword}不再只是夢想，而是你生活的實踐。`, `現在就動手，現在就改變，${keyword}就在你的手中。`, `不要等待完美的時機，因為每一個當下都是創造${keyword}的最佳時刻。`],\n      reflective: [`回頭看看走過的路，${keyword}一直都在那裡，等待著你去發現。`, `靜下心來想想，${keyword}的種子早已在心中萌芽。`, `或許${keyword}的真諦就在於這種深度的思考與感悟。`]\n    };\n    const toneClosings = closings[tone] || closings.inspirational;\n    return toneClosings[Math.floor(Math.random() * toneClosings.length)];\n  }\n\n  // 生成增強版場景\n  generateEnhancedScenes(theme, scenario) {\n    const sceneTemplates = {\n      success: [\"日出時分，城市天際線的鳥瞰鏡頭，象徵新的開始\", \"人物在辦公室深夜工作的剪影，專注而堅定\", \"從失敗到成功的蒙太奇，展現努力的過程\", \"成功時刻的慶祝場面，但重點在眼中的堅定\"],\n      growth: [\"植物從種子到參天大樹的延時攝影\", \"人物學習新技能的過程片段\", \"從困難到突破的轉變時刻\", \"蝴蝶破繭而出的隱喻畫面\"],\n      courage: [\"人物站在懸崖邊，面對廣闊天空的背影\", \"在黑暗中點亮第一盞燈的瞬間\", \"決定性時刻的慢鏡頭特寫\", \"從恐懼到勇敢的眼神變化\"]\n    };\n    return sceneTemplates[theme] || sceneTemplates.success;\n  }\n\n  // 生成建議\n  generateSuggestions(quote, theme) {\n    return {\n      alternativeQuotes: this.generateAlternativeQuotes(quote, theme),\n      improvementTips: this.generateImprovementTips(theme),\n      relatedThemes: this.getRelatedThemes(theme)\n    };\n  }\n\n  // 生成替代金句\n  generateAlternativeQuotes(originalQuote, theme) {\n    const alternatives = [];\n    const themeData = this.inspirationalThemes[theme];\n    for (let i = 0; i < 3; i++) {\n      const template = this.quoteTemplates[Math.floor(Math.random() * this.quoteTemplates.length)];\n      const keywords = themeData.keywords;\n      let quote = template.replace(/\\{[^}]+\\}/g, match => {\n        return keywords[Math.floor(Math.random() * keywords.length)];\n      });\n      alternatives.push(quote);\n    }\n    return alternatives;\n  }\n\n  // 生成改進建議\n  generateImprovementTips(theme) {\n    const tips = {\n      success: [\"考慮添加具體的成功指標或里程碑\", \"可以融入失敗後重新站起的元素\", \"強調過程而非結果的重要性\"],\n      growth: [\"加入個人成長的具體例子\", \"可以對比過去和現在的改變\", \"強調學習和適應的重要性\"],\n      courage: [\"描述克服具體恐懼的情境\", \"可以加入支持和鼓勵的元素\", \"強調勇氣是可以培養的品質\"]\n    };\n    return tips[theme] || tips.success;\n  }\n\n  // 獲取相關主題\n  getRelatedThemes(currentTheme) {\n    const relationships = {\n      success: ['growth', 'courage'],\n      growth: ['success', 'courage'],\n      courage: ['success', 'growth']\n    };\n    return relationships[currentTheme] || [];\n  }\n\n  // 生成視覺元素建議\n  generateVisualElements(theme) {\n    const elements = {\n      success: {\n        colors: ['#FFD700', '#FF6B35', '#1E3A8A'],\n        fonts: ['現代感強的無襯線字體', '粗體標題字型'],\n        effects: ['金色光芒特效', '上升箭頭動畫', '光線追蹤效果']\n      },\n      growth: {\n        colors: ['#22C55E', '#84CC16', '#0EA5E9'],\n        fonts: ['自然有機感的字體', '手寫風格字型'],\n        effects: ['生長動畫', '漸變色過渡', '粒子效果']\n      },\n      courage: {\n        colors: ['#DC2626', '#F59E0B', '#7C3AED'],\n        fonts: ['力量感的粗體字', '英雄主義風格字型'],\n        effects: ['火焰特效', '閃電動畫', '光劍效果']\n      }\n    };\n    return elements[theme] || elements.success;\n  }\n\n  // 回退增強功能（當 AI API 不可用時）\n  fallbackEnhancement(quote, theme, tone) {\n    return {\n      enhancedScript: {\n        intro: `關於${theme}的思考...`,\n        story: `${quote} 這句話蕴含着深刻的智慧...`,\n        closing: \"讓我們一起踐行這個理念。\",\n        scenes: [\"基本場景描述\"]\n      },\n      suggestions: {\n        alternativeQuotes: [\"建議功能暫時不可用\"],\n        improvementTips: [\"請稍後重試\"],\n        relatedThemes: []\n      },\n      visualElements: {\n        colors: ['#333333'],\n        fonts: ['默認字體'],\n        effects: ['基本效果']\n      },\n      confidence: 60,\n      aiGenerated: false\n    };\n  }\n\n  // 生成智能金句建議\n  async generateSmartQuotes(theme, mood, length = 5) {\n    try {\n      await new Promise(resolve => setTimeout(resolve, 800));\n      const themeData = this.inspirationalThemes[theme];\n      const quotes = [];\n      for (let i = 0; i < length; i++) {\n        const template = this.quoteTemplates[Math.floor(Math.random() * this.quoteTemplates.length)];\n        const keywords = themeData.keywords;\n        let quote = template.replace(/\\{[^}]+\\}/g, () => {\n          return keywords[Math.floor(Math.random() * keywords.length)];\n        });\n        quotes.push({\n          text: quote,\n          theme: theme,\n          confidence: Math.floor(Math.random() * 20) + 80,\n          popularity: Math.floor(Math.random() * 100)\n        });\n      }\n      return quotes.sort((a, b) => b.confidence - a.confidence);\n    } catch (error) {\n      console.error('智能金句生成失敗:', error);\n      return [];\n    }\n  }\n\n  // 分析使用者輸入的金句\n  async analyzeQuote(quote) {\n    try {\n      await new Promise(resolve => setTimeout(resolve, 600));\n      const analysis = {\n        sentiment: this.analyzeSentiment(quote),\n        themes: this.detectThemes(quote),\n        emotionalImpact: Math.floor(Math.random() * 30) + 70,\n        suggestions: this.getQuoteImprovementSuggestions(quote),\n        keywords: this.extractKeywords(quote)\n      };\n      return analysis;\n    } catch (error) {\n      console.error('金句分析失敗:', error);\n      return null;\n    }\n  }\n\n  // 情感分析\n  analyzeSentiment(quote) {\n    const positiveWords = ['成功', '成長', '勇氣', '希望', '夢想', '堅持', '努力', '相信'];\n    const negativeWords = ['失敗', '困難', '挫折', '恐懼'];\n    let positive = 0;\n    let negative = 0;\n    positiveWords.forEach(word => {\n      if (quote.includes(word)) positive++;\n    });\n    negativeWords.forEach(word => {\n      if (quote.includes(word)) negative++;\n    });\n    if (positive > negative) return 'positive';\n    if (negative > positive) return 'negative';\n    return 'neutral';\n  }\n\n  // 檢測主題\n  detectThemes(quote) {\n    const themes = [];\n    Object.keys(this.inspirationalThemes).forEach(theme => {\n      const keywords = this.inspirationalThemes[theme].keywords;\n      const matches = keywords.filter(keyword => quote.includes(keyword));\n      if (matches.length > 0) {\n        themes.push({\n          theme: theme,\n          confidence: matches.length / keywords.length * 100,\n          matchedKeywords: matches\n        });\n      }\n    });\n    return themes.sort((a, b) => b.confidence - a.confidence);\n  }\n\n  // 提取關鍵詞\n  extractKeywords(quote) {\n    const allKeywords = Object.values(this.inspirationalThemes).flatMap(theme => theme.keywords);\n    return allKeywords.filter(keyword => quote.includes(keyword));\n  }\n\n  // 獲取金句改進建議\n  getQuoteImprovementSuggestions(quote) {\n    const suggestions = [];\n    if (quote.length < 10) {\n      suggestions.push(\"金句可以更具體一些，增加更多細節\");\n    }\n    if (quote.length > 50) {\n      suggestions.push(\"金句可以更簡潔，突出核心訊息\");\n    }\n    if (!quote.includes('你') && !quote.includes('我')) {\n      suggestions.push(\"可以加入人稱代詞，讓金句更有親和力\");\n    }\n    const keywords = this.extractKeywords(quote);\n    if (keywords.length === 0) {\n      suggestions.push(\"可以加入更多勵志關鍵詞，增強激勵效果\");\n    }\n    return suggestions;\n  }\n}\n\n// 導出單例實例\nexport const aiService = new AIService();\nexport default AIService;","map":{"version":3,"names":["AIService","constructor","baseURL","apiKey","process","env","REACT_APP_OPENAI_API_KEY","copywritingThemes","product","keywords","scenarios","hooks","service","lifestyle","business","copyTemplates","benefits","proofs","actions","enhanceCopywriting","topic","theme","tone","wordCount","Promise","resolve","setTimeout","longFormContent","generateLongFormCopywriting","suggestions","generateCopywritingSuggestions","structureAnalysis","analyzeCopywritingStructure","copywriting","confidence","Math","floor","random","aiGenerated","error","console","fallbackEnhancement","themeData","structure","headline","generateHeadline","introduction","generateIntroduction","mainContent","generateMainContent","generateBenefitsList","proof","generateSocialProof","conclusion","generateConclusion","cta","generateCTA","headlines","length","intros","professional","friendly","urgent","creative","targetWords","baseContent","map","scenario","expandedContent","wordsPerSection","ceil","forEach","content","index","expandedSection","push","join","conclusions","ctas","alternativeHeadlines","generateAlternativeHeadlines","improvementTips","getCopywritingTips","relatedThemes","getRelatedThemes","keywordSuggestions","getKeywordSuggestions","alternatives","slice","tips","readability","engagement","persuasion","generateEnhancedContent","quote","inspirationalThemes","randomKeyword","randomScenario","enhancedSections","intro","generateEnhancedIntro","story","generateEnhancedStory","closing","generateEnhancedClosing","scenes","generateEnhancedScenes","keyword","success","growth","courage","themeIntros","closings","inspirational","motivational","reflective","toneClosings","sceneTemplates","generateSuggestions","alternativeQuotes","generateAlternativeQuotes","generateImprovementTips","originalQuote","i","template","quoteTemplates","replace","match","currentTheme","relationships","generateVisualElements","elements","colors","fonts","effects","enhancedScript","visualElements","generateSmartQuotes","mood","quotes","text","popularity","sort","a","b","analyzeQuote","analysis","sentiment","analyzeSentiment","themes","detectThemes","emotionalImpact","getQuoteImprovementSuggestions","extractKeywords","positiveWords","negativeWords","positive","negative","word","includes","Object","keys","matches","filter","matchedKeywords","allKeywords","values","flatMap","aiService"],"sources":["/Users/gilko/Documents/claude-code/soup2/motivation-script-generator/src/services/aiService.js"],"sourcesContent":["// src/services/aiService.js\n\nclass AIService {\n    constructor() {\n        // 模擬 AI API 配置\n        this.baseURL = 'https://api.openai.com/v1';\n        this.apiKey = process.env.REACT_APP_OPENAI_API_KEY || '';\n        \n        // 生人文案主題庫\n        this.copywritingThemes = {\n            product: {\n                keywords: ['品質', '創新', '價值', '體驗', '信賴', '專業', '卓越', '突破'],\n                scenarios: ['產品發布', '品牌故事', '用戶見證', '技術優勢', '市場領導'],\n                hooks: ['你知道嗎？', '想像一下...', '有沒有想過', '是時候了', '別再等了']\n            },\n            service: {\n                keywords: ['專業', '貼心', '效率', '解決', '支援', '服務', '滿意', '安心'],\n                scenarios: ['服務介紹', '客戶案例', '問題解決', '專業諮詢', '售後保障'],\n                hooks: ['為什麼選擇我們？', '讓我們來幫您', '您的需求我們懂', '專業團隊為您服務', '一站式解決方案']\n            },\n            lifestyle: {\n                keywords: ['生活', '品味', '享受', '質感', '美好', '精緻', '優雅', '舒適'],\n                scenarios: ['生活方式', '品味提升', '休閒娛樂', '居家生活', '個人風格'],\n                hooks: ['生活可以更美好', '品味從選擇開始', '給自己一個理由', '值得擁有的美好', '讓生活更精彩']\n            },\n            business: {\n                keywords: ['商機', '成長', '效益', '投資', '收益', '策略', '競爭', '優勢'],\n                scenarios: ['商業機會', '投資方案', '合作提案', '市場分析', '競爭優勢'],\n                hooks: ['抓住商機', '投資未來', '合作共贏', '領先競爭', '創造價值']\n            }\n        };\n        \n        // 文案結構模板庫\n        this.copyTemplates = {\n            hooks: [\n                \"你是否曾經想過{問題}？\",\n                \"在{場景}中，最重要的是什麼？\",\n                \"為什麼{目標對象}都選擇{解決方案}？\",\n                \"如果有一個方法能讓你{期望結果}...\",\n                \"想像一下{理想情境}的感覺\"\n            ],\n            benefits: [\n                \"不僅僅是{基本功能}，更是{深層價值}\",\n                \"從{現況}到{理想狀態}的完美轉換\",\n                \"讓{目標}變得{形容詞}又{形容詞}\",\n                \"專為{目標對象}量身打造的{解決方案}\"\n            ],\n            proofs: [\n                \"超過{數字}的用戶見證了{效果}\",\n                \"經過{時間}的市場驗證\",\n                \"{權威機構}認證推薦\",\n                \"成功案例遍布{範圍}\"\n            ],\n            actions: [\n                \"現在就開始{行動}，改變從今天開始\",\n                \"把握{時機}，機會不等人\",\n                \"加入{群體}，一起{目標}\",\n                \"聯繫我們，讓專業為您{服務內容}\"\n            ]\n        };\n    }\n\n    // 模擬 AI 增強的文案生成\n    async enhanceCopywriting(topic, theme, tone, wordCount = 800) {\n        try {\n            // 模擬 API 延遲\n            await new Promise(resolve => setTimeout(resolve, 1000));\n            \n            const longFormContent = this.generateLongFormCopywriting(topic, theme, tone, wordCount);\n            const suggestions = this.generateCopywritingSuggestions(topic, theme);\n            const structureAnalysis = this.analyzeCopywritingStructure(longFormContent);\n            \n            return {\n                copywriting: longFormContent,\n                suggestions: suggestions,\n                structureAnalysis: structureAnalysis,\n                confidence: Math.floor(Math.random() * 20) + 80, // 80-100% 信心度\n                aiGenerated: true\n            };\n            \n        } catch (error) {\n            console.error('AI 增強失敗:', error);\n            // 回退到基本功能\n            return this.fallbackEnhancement(topic, theme, tone);\n        }\n    }\n\n    // 生成長文案內容\n    generateLongFormCopywriting(topic, theme, tone, wordCount) {\n        const themeData = this.copywritingThemes[theme] || this.copywritingThemes.product;\n        const hooks = themeData.hooks || themeData.keywords;\n        const scenarios = themeData.scenarios;\n        \n        const structure = {\n            headline: this.generateHeadline(topic, theme, hooks),\n            introduction: this.generateIntroduction(topic, theme, tone),\n            mainContent: this.generateMainContent(topic, theme, scenarios, wordCount),\n            benefits: this.generateBenefitsList(topic, theme),\n            proof: this.generateSocialProof(topic, theme),\n            conclusion: this.generateConclusion(topic, tone),\n            cta: this.generateCTA(topic, tone)\n        };\n        \n        return structure;\n    }\n\n    // 生成標題\n    generateHeadline(topic, theme, hooks) {\n        const headlines = [\n            `革新${topic}體驗，創造無限可能`,\n            `專業${topic}解決方案，值得信賴的選擇`,\n            `${topic}新標準，引領行業變革`,\n            `選擇優質${topic}，投資美好未來`\n        ];\n        return headlines[Math.floor(Math.random() * headlines.length)];\n    }\n\n    // 生成介紹段落\n    generateIntroduction(topic, theme, tone) {\n        const intros = {\n            professional: `在當今競爭激烈的市場環境中，選擇合適的${topic}至關重要。我們深入了解客戶需求，致力於提供最專業的解決方案。`,\n            friendly: `你好！很高興與你分享關於${topic}的精彩內容。讓我們一起探索這個充滿機會的領域吧！`,\n            urgent: `機會稍縱即逝！現在正是選擇優質${topic}的最佳時機。不要讓猶豫成為成功路上的絆腳石。`,\n            creative: `想像一個全新的${topic}世界，在這裡，創新與品質完美融合，每一個細節都在訴說著卓越的故事。`\n        };\n        return intros[tone] || intros.professional;\n    }\n\n    // 生成主要內容\n    generateMainContent(topic, theme, scenarios, targetWords) {\n        const baseContent = scenarios.map(scenario => {\n            return `在${scenario}領域，我們的${topic}展現出卓越的表現。通過深入的市場研究和技術創新，我們不斷提升產品品質，確保能夠滿足各種複雜需求。我們的專業團隊擁有豐富的行業經驗，能夠為客戶提供量身訂製的解決方案。`;\n        });\n        \n        // 擴展內容以達到目標字數\n        const expandedContent = [];\n        const wordsPerSection = Math.ceil(targetWords * 0.6 / baseContent.length); // 主內容佔 60%\n        \n        baseContent.forEach((content, index) => {\n            let expandedSection = content;\n            \n            // 根據主題添加特定內容\n            switch (theme) {\n                case 'product':\n                    expandedSection += `我們的${topic}採用先進的製造工藝和優質材料，確保產品的耐用性和可靠性。每一個產品都經過嚴格的品質檢測，只有達到我們嚴苛標準的產品才能與客戶見面。`;\n                    break;\n                case 'service':\n                    expandedSection += `我們的服務團隊24小時待命，隨時準備為客戶解決各種${topic}相關問題。我們相信，優質的服務是建立長期合作關係的基礎。`;\n                    break;\n                case 'lifestyle':\n                    expandedSection += `選擇我們的${topic}，就是選擇一種更加精緻的生活方式。我們注重每一個細節，力求為您創造最舒適的使用體驗。`;\n                    break;\n                case 'business':\n                    expandedSection += `在商業環境中，效率與成本控制同樣重要。我們的${topic}方案能夠幫助企業優化流程，提高工作效率，同時降低營運成本。`;\n                    break;\n            }\n            \n            expandedContent.push(expandedSection);\n        });\n        \n        return expandedContent.join('\\n\\n');\n    }\n\n    // 生成效益清單\n    generateBenefitsList(topic, theme) {\n        const benefits = {\n            product: [\n                `高品質保證：每一個${topic}都經過嚴格品質控制`,\n                `創新設計：融合最新技術與人性化設計理念`,\n                `長期價值：投資於品質，享受長久效益`,\n                `專業支援：完善的售前售後服務體系`\n            ],\n            service: [\n                `專業團隊：由行業專家組成的服務團隊`,\n                `客製化方案：根據客戶需求量身訂製`,\n                `高效執行：標準化流程確保服務品質`,\n                `持續優化：根據反饋不斷改進服務`\n            ],\n            lifestyle: [\n                `品質生活：提升日常生活品質`,\n                `個人風格：彰顯獨特品味與格調`,\n                `舒適體驗：注重使用者感受`,\n                `長期投資：品質選擇的持續回報`\n            ],\n            business: [\n                `效率提升：優化業務流程`,\n                `成本控制：有效降低營運成本`,\n                `競爭優勢：在市場中保持領先`,\n                `風險管理：專業的風險評估與控制`\n            ]\n        };\n        \n        return benefits[theme] || benefits.product;\n    }\n\n    // 生成社會證明\n    generateSocialProof(topic, theme) {\n        const proofs = [\n            `超過10,000名滿意客戶選擇了我們的${topic}`,\n            `98%的客戶推薦率證明了我們的專業水準`,\n            `榮獲多項行業認證與獎項`,\n            `成功案例遍布各個行業領域`\n        ];\n        return proofs[Math.floor(Math.random() * proofs.length)];\n    }\n\n    // 生成結論\n    generateConclusion(topic, tone) {\n        const conclusions = {\n            professional: `綜合以上所述，選擇我們的${topic}是明智的投資決策。我們承諾為每一位客戶提供最優質的產品與服務。`,\n            friendly: `希望這些資訊對你有所幫助！如果你對我們的${topic}感興趣，歡迎隨時與我們聯繫。`,\n            urgent: `時間寶貴，機會難得！現在就採取行動，選擇我們的${topic}，開啟成功之路！`,\n            creative: `讓我們一起創造屬於你的${topic}傳奇故事，在這個充滿可能性的旅程中，我們將是你最可靠的夥伴。`\n        };\n        return conclusions[tone] || conclusions.professional;\n    }\n\n    // 生成行動號召\n    generateCTA(topic, tone) {\n        const ctas = {\n            professional: `立即聯繫我們的專業顧問，了解更多${topic}詳細資訊。`,\n            friendly: `想要了解更多嗎？歡迎與我們聊聊！`,\n            urgent: `機會有限！立即行動，把握${topic}優惠！`,\n            creative: `準備好開始你的${topic}冒險之旅了嗎？`\n        };\n        return ctas[tone] || ctas.professional;\n    }\n\n    // 生成文案建議\n    generateCopywritingSuggestions(topic, theme) {\n        return {\n            alternativeHeadlines: this.generateAlternativeHeadlines(topic, theme),\n            improvementTips: this.getCopywritingTips(theme),\n            relatedThemes: this.getRelatedThemes(theme),\n            keywordSuggestions: this.getKeywordSuggestions(topic, theme)\n        };\n    }\n\n    // 生成替代標題\n    generateAlternativeHeadlines(topic, theme) {\n        const alternatives = [\n            `突破性${topic}解決方案`,\n            `重新定義${topic}標準`,\n            `專業${topic}，品質保證`,\n            `創新${topic}，超越期待`,\n            `值得信賴的${topic}夥伴`\n        ];\n        return alternatives.slice(0, 3);\n    }\n\n    // 獲取文案建議\n    getCopywritingTips(theme) {\n        const tips = {\n            product: [\n                '強調產品的獨特賣點與競爭優勢',\n                '加入具體的數據與事實支撐',\n                '突出客戶使用後的具體效益'\n            ],\n            service: [\n                '展示服務團隊的專業能力',\n                '提供具體的服務流程說明',\n                '強調客戶成功案例與見證'\n            ],\n            lifestyle: [\n                '營造情感共鳴與美好想像',\n                '強調生活品質的提升',\n                '突出個人品味與風格'\n            ],\n            business: [\n                '量化商業價值與投資回報',\n                '提供行業分析與市場數據',\n                '強調競爭優勢與風險控制'\n            ]\n        };\n        return tips[theme] || tips.product;\n    }\n\n    // 獲取關鍵詞建議\n    getKeywordSuggestions(topic, theme) {\n        const themeData = this.copywritingThemes[theme] || this.copywritingThemes.product;\n        return themeData.keywords.slice(0, 5);\n    }\n\n    // 分析文案結構\n    analyzeCopywritingStructure(content) {\n        return {\n            structure: '完整的文案結構包含標題、介紹、主要內容、效益、證明、結論和行動號召',\n            readability: '內容結構清晰，邏輯性強，易於理解',\n            engagement: '採用多種修辭手法，增強讀者參與感',\n            persuasion: '運用說服力原則，有效引導讀者採取行動'\n        };\n    }\n\n    // 回退增強功能\n    fallbackEnhancement(topic, theme, tone) {\n        return {\n            copywriting: {\n                headline: `關於${topic}的專業方案`,\n                introduction: `我們為您提供優質的${topic}服務`,\n                mainContent: `專業、可靠、值得信賴的${topic}解決方案`,\n                benefits: ['專業服務', '品質保證', '客戶滿意'],\n                proof: '眾多客戶的信賴選擇',\n                conclusion: `選擇我們，選擇專業的${topic}服務`,\n                cta: '立即聯繫我們了解更多'\n            },\n            suggestions: {\n                alternativeHeadlines: ['建議功能暫時不可用'],\n                improvementTips: ['請稍後重試'],\n                relatedThemes: [],\n                keywordSuggestions: []\n            },\n            structureAnalysis: {\n                structure: '基本結構',\n                readability: '標準',\n                engagement: '一般',\n                persuasion: '普通'\n            },\n            confidence: 60,\n            aiGenerated: false\n        };\n    }\n\n    // 生成增強內容\n    generateEnhancedContent(quote, theme, tone) {\n        const themeData = this.inspirationalThemes[theme];\n        const randomKeyword = themeData.keywords[Math.floor(Math.random() * themeData.keywords.length)];\n        const randomScenario = themeData.scenarios[Math.floor(Math.random() * themeData.scenarios.length)];\n        \n        const enhancedSections = {\n            intro: this.generateEnhancedIntro(theme, randomKeyword),\n            story: this.generateEnhancedStory(quote, theme, randomScenario),\n            closing: this.generateEnhancedClosing(tone, randomKeyword),\n            scenes: this.generateEnhancedScenes(theme, randomScenario)\n        };\n        \n        return enhancedSections;\n    }\n\n    // 生成增強版開場白\n    generateEnhancedIntro(theme, keyword) {\n        const intros = {\n            success: [\n                `在追求${keyword}的路上，每個人都有屬於自己的故事...`,\n                `${keyword}從來不是偶然，而是來自日復一日的堅持...`,\n                `什麼是真正的${keyword}？讓我們從一個故事開始說起...`\n            ],\n            growth: [\n                `${keyword}是生命中最美麗的過程，就像破繭而出的蝴蝶...`,\n                `每一次的${keyword}都在告訴我們，改變是可能的...`,\n                `在${keyword}的道路上，沒有終點，只有不斷的超越...`\n            ],\n            courage: [\n                `${keyword}不是沒有恐懼，而是即使恐懼仍然前行...`,\n                `真正的${keyword}來自於面對未知的決心...`,\n                `${keyword}是一種選擇，選擇相信自己的力量...`\n            ]\n        };\n        \n        const themeIntros = intros[theme] || intros.success;\n        return themeIntros[Math.floor(Math.random() * themeIntros.length)];\n    }\n\n    // 生成增強版故事\n    generateEnhancedStory(quote, theme, scenario) {\n        return `想像一下${scenario}中的主角，面對重重困難時的內心掙扎。${quote} 這句話不僅僅是文字，更是一種信念的力量。當我們真正理解並實踐這句話時，我們會發現內在的潛能被喚醒，原本看似不可能的事情變得觸手可及。這就是信念的力量，這就是${scenario}背後真正的意義。`;\n    }\n\n    // 生成增強版結尾\n    generateEnhancedClosing(tone, keyword) {\n        const closings = {\n            inspirational: [\n                `現在就是開始的最佳時機，讓${keyword}成為你前進的動力。`,\n                `每一天都是新的開始，每一步都在創造屬於你的${keyword}故事。`,\n                `相信自己，相信${keyword}的力量，你的未來從現在開始改寫。`\n            ],\n            motivational: [\n                `行動起來吧！讓${keyword}不再只是夢想，而是你生活的實踐。`,\n                `現在就動手，現在就改變，${keyword}就在你的手中。`,\n                `不要等待完美的時機，因為每一個當下都是創造${keyword}的最佳時刻。`\n            ],\n            reflective: [\n                `回頭看看走過的路，${keyword}一直都在那裡，等待著你去發現。`,\n                `靜下心來想想，${keyword}的種子早已在心中萌芽。`,\n                `或許${keyword}的真諦就在於這種深度的思考與感悟。`\n            ]\n        };\n        \n        const toneClosings = closings[tone] || closings.inspirational;\n        return toneClosings[Math.floor(Math.random() * toneClosings.length)];\n    }\n\n    // 生成增強版場景\n    generateEnhancedScenes(theme, scenario) {\n        const sceneTemplates = {\n            success: [\n                \"日出時分，城市天際線的鳥瞰鏡頭，象徵新的開始\",\n                \"人物在辦公室深夜工作的剪影，專注而堅定\",\n                \"從失敗到成功的蒙太奇，展現努力的過程\",\n                \"成功時刻的慶祝場面，但重點在眼中的堅定\"\n            ],\n            growth: [\n                \"植物從種子到參天大樹的延時攝影\",\n                \"人物學習新技能的過程片段\",\n                \"從困難到突破的轉變時刻\",\n                \"蝴蝶破繭而出的隱喻畫面\"\n            ],\n            courage: [\n                \"人物站在懸崖邊，面對廣闊天空的背影\",\n                \"在黑暗中點亮第一盞燈的瞬間\",\n                \"決定性時刻的慢鏡頭特寫\",\n                \"從恐懼到勇敢的眼神變化\"\n            ]\n        };\n        \n        return sceneTemplates[theme] || sceneTemplates.success;\n    }\n\n    // 生成建議\n    generateSuggestions(quote, theme) {\n        return {\n            alternativeQuotes: this.generateAlternativeQuotes(quote, theme),\n            improvementTips: this.generateImprovementTips(theme),\n            relatedThemes: this.getRelatedThemes(theme)\n        };\n    }\n\n    // 生成替代金句\n    generateAlternativeQuotes(originalQuote, theme) {\n        const alternatives = [];\n        const themeData = this.inspirationalThemes[theme];\n        \n        for (let i = 0; i < 3; i++) {\n            const template = this.quoteTemplates[Math.floor(Math.random() * this.quoteTemplates.length)];\n            const keywords = themeData.keywords;\n            \n            let quote = template.replace(/\\{[^}]+\\}/g, (match) => {\n                return keywords[Math.floor(Math.random() * keywords.length)];\n            });\n            \n            alternatives.push(quote);\n        }\n        \n        return alternatives;\n    }\n\n    // 生成改進建議\n    generateImprovementTips(theme) {\n        const tips = {\n            success: [\n                \"考慮添加具體的成功指標或里程碑\",\n                \"可以融入失敗後重新站起的元素\",\n                \"強調過程而非結果的重要性\"\n            ],\n            growth: [\n                \"加入個人成長的具體例子\",\n                \"可以對比過去和現在的改變\",\n                \"強調學習和適應的重要性\"\n            ],\n            courage: [\n                \"描述克服具體恐懼的情境\",\n                \"可以加入支持和鼓勵的元素\",\n                \"強調勇氣是可以培養的品質\"\n            ]\n        };\n        \n        return tips[theme] || tips.success;\n    }\n\n    // 獲取相關主題\n    getRelatedThemes(currentTheme) {\n        const relationships = {\n            success: ['growth', 'courage'],\n            growth: ['success', 'courage'],\n            courage: ['success', 'growth']\n        };\n        \n        return relationships[currentTheme] || [];\n    }\n\n    // 生成視覺元素建議\n    generateVisualElements(theme) {\n        const elements = {\n            success: {\n                colors: ['#FFD700', '#FF6B35', '#1E3A8A'],\n                fonts: ['現代感強的無襯線字體', '粗體標題字型'],\n                effects: ['金色光芒特效', '上升箭頭動畫', '光線追蹤效果']\n            },\n            growth: {\n                colors: ['#22C55E', '#84CC16', '#0EA5E9'],\n                fonts: ['自然有機感的字體', '手寫風格字型'],\n                effects: ['生長動畫', '漸變色過渡', '粒子效果']\n            },\n            courage: {\n                colors: ['#DC2626', '#F59E0B', '#7C3AED'],\n                fonts: ['力量感的粗體字', '英雄主義風格字型'],\n                effects: ['火焰特效', '閃電動畫', '光劍效果']\n            }\n        };\n        \n        return elements[theme] || elements.success;\n    }\n\n    // 回退增強功能（當 AI API 不可用時）\n    fallbackEnhancement(quote, theme, tone) {\n        return {\n            enhancedScript: {\n                intro: `關於${theme}的思考...`,\n                story: `${quote} 這句話蕴含着深刻的智慧...`,\n                closing: \"讓我們一起踐行這個理念。\",\n                scenes: [\"基本場景描述\"]\n            },\n            suggestions: {\n                alternativeQuotes: [\"建議功能暫時不可用\"],\n                improvementTips: [\"請稍後重試\"],\n                relatedThemes: []\n            },\n            visualElements: {\n                colors: ['#333333'],\n                fonts: ['默認字體'],\n                effects: ['基本效果']\n            },\n            confidence: 60,\n            aiGenerated: false\n        };\n    }\n\n    // 生成智能金句建議\n    async generateSmartQuotes(theme, mood, length = 5) {\n        try {\n            await new Promise(resolve => setTimeout(resolve, 800));\n            \n            const themeData = this.inspirationalThemes[theme];\n            const quotes = [];\n            \n            for (let i = 0; i < length; i++) {\n                const template = this.quoteTemplates[Math.floor(Math.random() * this.quoteTemplates.length)];\n                const keywords = themeData.keywords;\n                \n                let quote = template.replace(/\\{[^}]+\\}/g, () => {\n                    return keywords[Math.floor(Math.random() * keywords.length)];\n                });\n                \n                quotes.push({\n                    text: quote,\n                    theme: theme,\n                    confidence: Math.floor(Math.random() * 20) + 80,\n                    popularity: Math.floor(Math.random() * 100)\n                });\n            }\n            \n            return quotes.sort((a, b) => b.confidence - a.confidence);\n            \n        } catch (error) {\n            console.error('智能金句生成失敗:', error);\n            return [];\n        }\n    }\n\n    // 分析使用者輸入的金句\n    async analyzeQuote(quote) {\n        try {\n            await new Promise(resolve => setTimeout(resolve, 600));\n            \n            const analysis = {\n                sentiment: this.analyzeSentiment(quote),\n                themes: this.detectThemes(quote),\n                emotionalImpact: Math.floor(Math.random() * 30) + 70,\n                suggestions: this.getQuoteImprovementSuggestions(quote),\n                keywords: this.extractKeywords(quote)\n            };\n            \n            return analysis;\n            \n        } catch (error) {\n            console.error('金句分析失敗:', error);\n            return null;\n        }\n    }\n\n    // 情感分析\n    analyzeSentiment(quote) {\n        const positiveWords = ['成功', '成長', '勇氣', '希望', '夢想', '堅持', '努力', '相信'];\n        const negativeWords = ['失敗', '困難', '挫折', '恐懼'];\n        \n        let positive = 0;\n        let negative = 0;\n        \n        positiveWords.forEach(word => {\n            if (quote.includes(word)) positive++;\n        });\n        \n        negativeWords.forEach(word => {\n            if (quote.includes(word)) negative++;\n        });\n        \n        if (positive > negative) return 'positive';\n        if (negative > positive) return 'negative';\n        return 'neutral';\n    }\n\n    // 檢測主題\n    detectThemes(quote) {\n        const themes = [];\n        \n        Object.keys(this.inspirationalThemes).forEach(theme => {\n            const keywords = this.inspirationalThemes[theme].keywords;\n            const matches = keywords.filter(keyword => quote.includes(keyword));\n            \n            if (matches.length > 0) {\n                themes.push({\n                    theme: theme,\n                    confidence: (matches.length / keywords.length) * 100,\n                    matchedKeywords: matches\n                });\n            }\n        });\n        \n        return themes.sort((a, b) => b.confidence - a.confidence);\n    }\n\n    // 提取關鍵詞\n    extractKeywords(quote) {\n        const allKeywords = Object.values(this.inspirationalThemes)\n            .flatMap(theme => theme.keywords);\n        \n        return allKeywords.filter(keyword => quote.includes(keyword));\n    }\n\n    // 獲取金句改進建議\n    getQuoteImprovementSuggestions(quote) {\n        const suggestions = [];\n        \n        if (quote.length < 10) {\n            suggestions.push(\"金句可以更具體一些，增加更多細節\");\n        }\n        \n        if (quote.length > 50) {\n            suggestions.push(\"金句可以更簡潔，突出核心訊息\");\n        }\n        \n        if (!quote.includes('你') && !quote.includes('我')) {\n            suggestions.push(\"可以加入人稱代詞，讓金句更有親和力\");\n        }\n        \n        const keywords = this.extractKeywords(quote);\n        if (keywords.length === 0) {\n            suggestions.push(\"可以加入更多勵志關鍵詞，增強激勵效果\");\n        }\n        \n        return suggestions;\n    }\n}\n\n// 導出單例實例\nexport const aiService = new AIService();\nexport default AIService;"],"mappings":"AAAA;;AAEA,MAAMA,SAAS,CAAC;EACZC,WAAWA,CAAA,EAAG;IACV;IACA,IAAI,CAACC,OAAO,GAAG,2BAA2B;IAC1C,IAAI,CAACC,MAAM,GAAGC,OAAO,CAACC,GAAG,CAACC,wBAAwB,IAAI,EAAE;;IAExD;IACA,IAAI,CAACC,iBAAiB,GAAG;MACrBC,OAAO,EAAE;QACLC,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;QAC1DC,SAAS,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;QACnDC,KAAK,EAAE,CAAC,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM;MACvD,CAAC;MACDC,OAAO,EAAE;QACLH,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;QAC1DC,SAAS,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;QACnDC,KAAK,EAAE,CAAC,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS;MAClE,CAAC;MACDE,SAAS,EAAE;QACPJ,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;QAC1DC,SAAS,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;QACnDC,KAAK,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ;MAChE,CAAC;MACDG,QAAQ,EAAE;QACNL,QAAQ,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;QAC1DC,SAAS,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;QACnDC,KAAK,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM;MAClD;IACJ,CAAC;;IAED;IACA,IAAI,CAACI,aAAa,GAAG;MACjBJ,KAAK,EAAE,CACH,cAAc,EACd,iBAAiB,EACjB,qBAAqB,EACrB,qBAAqB,EACrB,eAAe,CAClB;MACDK,QAAQ,EAAE,CACN,qBAAqB,EACrB,mBAAmB,EACnB,oBAAoB,EACpB,qBAAqB,CACxB;MACDC,MAAM,EAAE,CACJ,kBAAkB,EAClB,aAAa,EACb,YAAY,EACZ,YAAY,CACf;MACDC,OAAO,EAAE,CACL,mBAAmB,EACnB,cAAc,EACd,eAAe,EACf,kBAAkB;IAE1B,CAAC;EACL;;EAEA;EACA,MAAMC,kBAAkBA,CAACC,KAAK,EAAEC,KAAK,EAAEC,IAAI,EAAEC,SAAS,GAAG,GAAG,EAAE;IAC1D,IAAI;MACA;MACA,MAAM,IAAIC,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC,CAAC;MAEvD,MAAME,eAAe,GAAG,IAAI,CAACC,2BAA2B,CAACR,KAAK,EAAEC,KAAK,EAAEC,IAAI,EAAEC,SAAS,CAAC;MACvF,MAAMM,WAAW,GAAG,IAAI,CAACC,8BAA8B,CAACV,KAAK,EAAEC,KAAK,CAAC;MACrE,MAAMU,iBAAiB,GAAG,IAAI,CAACC,2BAA2B,CAACL,eAAe,CAAC;MAE3E,OAAO;QACHM,WAAW,EAAEN,eAAe;QAC5BE,WAAW,EAAEA,WAAW;QACxBE,iBAAiB,EAAEA,iBAAiB;QACpCG,UAAU,EAAEC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE;QAAE;QACjDC,WAAW,EAAE;MACjB,CAAC;IAEL,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,UAAU,EAAEA,KAAK,CAAC;MAChC;MACA,OAAO,IAAI,CAACE,mBAAmB,CAACrB,KAAK,EAAEC,KAAK,EAAEC,IAAI,CAAC;IACvD;EACJ;;EAEA;EACAM,2BAA2BA,CAACR,KAAK,EAAEC,KAAK,EAAEC,IAAI,EAAEC,SAAS,EAAE;IACvD,MAAMmB,SAAS,GAAG,IAAI,CAACnC,iBAAiB,CAACc,KAAK,CAAC,IAAI,IAAI,CAACd,iBAAiB,CAACC,OAAO;IACjF,MAAMG,KAAK,GAAG+B,SAAS,CAAC/B,KAAK,IAAI+B,SAAS,CAACjC,QAAQ;IACnD,MAAMC,SAAS,GAAGgC,SAAS,CAAChC,SAAS;IAErC,MAAMiC,SAAS,GAAG;MACdC,QAAQ,EAAE,IAAI,CAACC,gBAAgB,CAACzB,KAAK,EAAEC,KAAK,EAAEV,KAAK,CAAC;MACpDmC,YAAY,EAAE,IAAI,CAACC,oBAAoB,CAAC3B,KAAK,EAAEC,KAAK,EAAEC,IAAI,CAAC;MAC3D0B,WAAW,EAAE,IAAI,CAACC,mBAAmB,CAAC7B,KAAK,EAAEC,KAAK,EAAEX,SAAS,EAAEa,SAAS,CAAC;MACzEP,QAAQ,EAAE,IAAI,CAACkC,oBAAoB,CAAC9B,KAAK,EAAEC,KAAK,CAAC;MACjD8B,KAAK,EAAE,IAAI,CAACC,mBAAmB,CAAChC,KAAK,EAAEC,KAAK,CAAC;MAC7CgC,UAAU,EAAE,IAAI,CAACC,kBAAkB,CAAClC,KAAK,EAAEE,IAAI,CAAC;MAChDiC,GAAG,EAAE,IAAI,CAACC,WAAW,CAACpC,KAAK,EAAEE,IAAI;IACrC,CAAC;IAED,OAAOqB,SAAS;EACpB;;EAEA;EACAE,gBAAgBA,CAACzB,KAAK,EAAEC,KAAK,EAAEV,KAAK,EAAE;IAClC,MAAM8C,SAAS,GAAG,CACd,KAAKrC,KAAK,WAAW,EACrB,KAAKA,KAAK,cAAc,EACxB,GAAGA,KAAK,YAAY,EACpB,OAAOA,KAAK,SAAS,CACxB;IACD,OAAOqC,SAAS,CAACtB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGoB,SAAS,CAACC,MAAM,CAAC,CAAC;EAClE;;EAEA;EACAX,oBAAoBA,CAAC3B,KAAK,EAAEC,KAAK,EAAEC,IAAI,EAAE;IACrC,MAAMqC,MAAM,GAAG;MACXC,YAAY,EAAE,sBAAsBxC,KAAK,gCAAgC;MACzEyC,QAAQ,EAAE,eAAezC,KAAK,0BAA0B;MACxD0C,MAAM,EAAE,kBAAkB1C,KAAK,wBAAwB;MACvD2C,QAAQ,EAAE,UAAU3C,KAAK;IAC7B,CAAC;IACD,OAAOuC,MAAM,CAACrC,IAAI,CAAC,IAAIqC,MAAM,CAACC,YAAY;EAC9C;;EAEA;EACAX,mBAAmBA,CAAC7B,KAAK,EAAEC,KAAK,EAAEX,SAAS,EAAEsD,WAAW,EAAE;IACtD,MAAMC,WAAW,GAAGvD,SAAS,CAACwD,GAAG,CAACC,QAAQ,IAAI;MAC1C,OAAO,IAAIA,QAAQ,SAAS/C,KAAK,oFAAoF;IACzH,CAAC,CAAC;;IAEF;IACA,MAAMgD,eAAe,GAAG,EAAE;IAC1B,MAAMC,eAAe,GAAGlC,IAAI,CAACmC,IAAI,CAACN,WAAW,GAAG,GAAG,GAAGC,WAAW,CAACP,MAAM,CAAC,CAAC,CAAC;;IAE3EO,WAAW,CAACM,OAAO,CAAC,CAACC,OAAO,EAAEC,KAAK,KAAK;MACpC,IAAIC,eAAe,GAAGF,OAAO;;MAE7B;MACA,QAAQnD,KAAK;QACT,KAAK,SAAS;UACVqD,eAAe,IAAI,MAAMtD,KAAK,mEAAmE;UACjG;QACJ,KAAK,SAAS;UACVsD,eAAe,IAAI,4BAA4BtD,KAAK,8BAA8B;UAClF;QACJ,KAAK,WAAW;UACZsD,eAAe,IAAI,QAAQtD,KAAK,4CAA4C;UAC5E;QACJ,KAAK,UAAU;UACXsD,eAAe,IAAI,yBAAyBtD,KAAK,+BAA+B;UAChF;MACR;MAEAgD,eAAe,CAACO,IAAI,CAACD,eAAe,CAAC;IACzC,CAAC,CAAC;IAEF,OAAON,eAAe,CAACQ,IAAI,CAAC,MAAM,CAAC;EACvC;;EAEA;EACA1B,oBAAoBA,CAAC9B,KAAK,EAAEC,KAAK,EAAE;IAC/B,MAAML,QAAQ,GAAG;MACbR,OAAO,EAAE,CACL,YAAYY,KAAK,WAAW,EAC5B,qBAAqB,EACrB,mBAAmB,EACnB,kBAAkB,CACrB;MACDR,OAAO,EAAE,CACL,mBAAmB,EACnB,kBAAkB,EAClB,kBAAkB,EAClB,iBAAiB,CACpB;MACDC,SAAS,EAAE,CACP,eAAe,EACf,gBAAgB,EAChB,cAAc,EACd,gBAAgB,CACnB;MACDC,QAAQ,EAAE,CACN,aAAa,EACb,eAAe,EACf,eAAe,EACf,iBAAiB;IAEzB,CAAC;IAED,OAAOE,QAAQ,CAACK,KAAK,CAAC,IAAIL,QAAQ,CAACR,OAAO;EAC9C;;EAEA;EACA4C,mBAAmBA,CAAChC,KAAK,EAAEC,KAAK,EAAE;IAC9B,MAAMJ,MAAM,GAAG,CACX,sBAAsBG,KAAK,EAAE,EAC7B,qBAAqB,EACrB,aAAa,EACb,cAAc,CACjB;IACD,OAAOH,MAAM,CAACkB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGpB,MAAM,CAACyC,MAAM,CAAC,CAAC;EAC5D;;EAEA;EACAJ,kBAAkBA,CAAClC,KAAK,EAAEE,IAAI,EAAE;IAC5B,MAAMuD,WAAW,GAAG;MAChBjB,YAAY,EAAE,eAAexC,KAAK,iCAAiC;MACnEyC,QAAQ,EAAE,uBAAuBzC,KAAK,gBAAgB;MACtD0C,MAAM,EAAE,0BAA0B1C,KAAK,UAAU;MACjD2C,QAAQ,EAAE,cAAc3C,KAAK;IACjC,CAAC;IACD,OAAOyD,WAAW,CAACvD,IAAI,CAAC,IAAIuD,WAAW,CAACjB,YAAY;EACxD;;EAEA;EACAJ,WAAWA,CAACpC,KAAK,EAAEE,IAAI,EAAE;IACrB,MAAMwD,IAAI,GAAG;MACTlB,YAAY,EAAE,mBAAmBxC,KAAK,OAAO;MAC7CyC,QAAQ,EAAE,kBAAkB;MAC5BC,MAAM,EAAE,eAAe1C,KAAK,KAAK;MACjC2C,QAAQ,EAAE,UAAU3C,KAAK;IAC7B,CAAC;IACD,OAAO0D,IAAI,CAACxD,IAAI,CAAC,IAAIwD,IAAI,CAAClB,YAAY;EAC1C;;EAEA;EACA9B,8BAA8BA,CAACV,KAAK,EAAEC,KAAK,EAAE;IACzC,OAAO;MACH0D,oBAAoB,EAAE,IAAI,CAACC,4BAA4B,CAAC5D,KAAK,EAAEC,KAAK,CAAC;MACrE4D,eAAe,EAAE,IAAI,CAACC,kBAAkB,CAAC7D,KAAK,CAAC;MAC/C8D,aAAa,EAAE,IAAI,CAACC,gBAAgB,CAAC/D,KAAK,CAAC;MAC3CgE,kBAAkB,EAAE,IAAI,CAACC,qBAAqB,CAAClE,KAAK,EAAEC,KAAK;IAC/D,CAAC;EACL;;EAEA;EACA2D,4BAA4BA,CAAC5D,KAAK,EAAEC,KAAK,EAAE;IACvC,MAAMkE,YAAY,GAAG,CACjB,MAAMnE,KAAK,MAAM,EACjB,OAAOA,KAAK,IAAI,EAChB,KAAKA,KAAK,OAAO,EACjB,KAAKA,KAAK,OAAO,EACjB,QAAQA,KAAK,IAAI,CACpB;IACD,OAAOmE,YAAY,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EACnC;;EAEA;EACAN,kBAAkBA,CAAC7D,KAAK,EAAE;IACtB,MAAMoE,IAAI,GAAG;MACTjF,OAAO,EAAE,CACL,gBAAgB,EAChB,cAAc,EACd,cAAc,CACjB;MACDI,OAAO,EAAE,CACL,aAAa,EACb,aAAa,EACb,aAAa,CAChB;MACDC,SAAS,EAAE,CACP,aAAa,EACb,WAAW,EACX,WAAW,CACd;MACDC,QAAQ,EAAE,CACN,aAAa,EACb,aAAa,EACb,aAAa;IAErB,CAAC;IACD,OAAO2E,IAAI,CAACpE,KAAK,CAAC,IAAIoE,IAAI,CAACjF,OAAO;EACtC;;EAEA;EACA8E,qBAAqBA,CAAClE,KAAK,EAAEC,KAAK,EAAE;IAChC,MAAMqB,SAAS,GAAG,IAAI,CAACnC,iBAAiB,CAACc,KAAK,CAAC,IAAI,IAAI,CAACd,iBAAiB,CAACC,OAAO;IACjF,OAAOkC,SAAS,CAACjC,QAAQ,CAAC+E,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EACzC;;EAEA;EACAxD,2BAA2BA,CAACwC,OAAO,EAAE;IACjC,OAAO;MACH7B,SAAS,EAAE,mCAAmC;MAC9C+C,WAAW,EAAE,kBAAkB;MAC/BC,UAAU,EAAE,kBAAkB;MAC9BC,UAAU,EAAE;IAChB,CAAC;EACL;;EAEA;EACAnD,mBAAmBA,CAACrB,KAAK,EAAEC,KAAK,EAAEC,IAAI,EAAE;IACpC,OAAO;MACHW,WAAW,EAAE;QACTW,QAAQ,EAAE,KAAKxB,KAAK,OAAO;QAC3B0B,YAAY,EAAE,YAAY1B,KAAK,IAAI;QACnC4B,WAAW,EAAE,cAAc5B,KAAK,MAAM;QACtCJ,QAAQ,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;QAClCmC,KAAK,EAAE,WAAW;QAClBE,UAAU,EAAE,aAAajC,KAAK,IAAI;QAClCmC,GAAG,EAAE;MACT,CAAC;MACD1B,WAAW,EAAE;QACTkD,oBAAoB,EAAE,CAAC,WAAW,CAAC;QACnCE,eAAe,EAAE,CAAC,OAAO,CAAC;QAC1BE,aAAa,EAAE,EAAE;QACjBE,kBAAkB,EAAE;MACxB,CAAC;MACDtD,iBAAiB,EAAE;QACfY,SAAS,EAAE,MAAM;QACjB+C,WAAW,EAAE,IAAI;QACjBC,UAAU,EAAE,IAAI;QAChBC,UAAU,EAAE;MAChB,CAAC;MACD1D,UAAU,EAAE,EAAE;MACdI,WAAW,EAAE;IACjB,CAAC;EACL;;EAEA;EACAuD,uBAAuBA,CAACC,KAAK,EAAEzE,KAAK,EAAEC,IAAI,EAAE;IACxC,MAAMoB,SAAS,GAAG,IAAI,CAACqD,mBAAmB,CAAC1E,KAAK,CAAC;IACjD,MAAM2E,aAAa,GAAGtD,SAAS,CAACjC,QAAQ,CAAC0B,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGK,SAAS,CAACjC,QAAQ,CAACiD,MAAM,CAAC,CAAC;IAC/F,MAAMuC,cAAc,GAAGvD,SAAS,CAAChC,SAAS,CAACyB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGK,SAAS,CAAChC,SAAS,CAACgD,MAAM,CAAC,CAAC;IAElG,MAAMwC,gBAAgB,GAAG;MACrBC,KAAK,EAAE,IAAI,CAACC,qBAAqB,CAAC/E,KAAK,EAAE2E,aAAa,CAAC;MACvDK,KAAK,EAAE,IAAI,CAACC,qBAAqB,CAACR,KAAK,EAAEzE,KAAK,EAAE4E,cAAc,CAAC;MAC/DM,OAAO,EAAE,IAAI,CAACC,uBAAuB,CAAClF,IAAI,EAAE0E,aAAa,CAAC;MAC1DS,MAAM,EAAE,IAAI,CAACC,sBAAsB,CAACrF,KAAK,EAAE4E,cAAc;IAC7D,CAAC;IAED,OAAOC,gBAAgB;EAC3B;;EAEA;EACAE,qBAAqBA,CAAC/E,KAAK,EAAEsF,OAAO,EAAE;IAClC,MAAMhD,MAAM,GAAG;MACXiD,OAAO,EAAE,CACL,MAAMD,OAAO,qBAAqB,EAClC,GAAGA,OAAO,uBAAuB,EACjC,SAASA,OAAO,kBAAkB,CACrC;MACDE,MAAM,EAAE,CACJ,GAAGF,OAAO,yBAAyB,EACnC,OAAOA,OAAO,kBAAkB,EAChC,IAAIA,OAAO,sBAAsB,CACpC;MACDG,OAAO,EAAE,CACL,GAAGH,OAAO,sBAAsB,EAChC,MAAMA,OAAO,eAAe,EAC5B,GAAGA,OAAO,oBAAoB;IAEtC,CAAC;IAED,MAAMI,WAAW,GAAGpD,MAAM,CAACtC,KAAK,CAAC,IAAIsC,MAAM,CAACiD,OAAO;IACnD,OAAOG,WAAW,CAAC5E,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG0E,WAAW,CAACrD,MAAM,CAAC,CAAC;EACtE;;EAEA;EACA4C,qBAAqBA,CAACR,KAAK,EAAEzE,KAAK,EAAE8C,QAAQ,EAAE;IAC1C,OAAO,OAAOA,QAAQ,qBAAqB2B,KAAK,kFAAkF3B,QAAQ,UAAU;EACxJ;;EAEA;EACAqC,uBAAuBA,CAAClF,IAAI,EAAEqF,OAAO,EAAE;IACnC,MAAMK,QAAQ,GAAG;MACbC,aAAa,EAAE,CACX,gBAAgBN,OAAO,WAAW,EAClC,wBAAwBA,OAAO,KAAK,EACpC,UAAUA,OAAO,kBAAkB,CACtC;MACDO,YAAY,EAAE,CACV,UAAUP,OAAO,kBAAkB,EACnC,eAAeA,OAAO,SAAS,EAC/B,wBAAwBA,OAAO,QAAQ,CAC1C;MACDQ,UAAU,EAAE,CACR,YAAYR,OAAO,iBAAiB,EACpC,UAAUA,OAAO,aAAa,EAC9B,KAAKA,OAAO,mBAAmB;IAEvC,CAAC;IAED,MAAMS,YAAY,GAAGJ,QAAQ,CAAC1F,IAAI,CAAC,IAAI0F,QAAQ,CAACC,aAAa;IAC7D,OAAOG,YAAY,CAACjF,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG+E,YAAY,CAAC1D,MAAM,CAAC,CAAC;EACxE;;EAEA;EACAgD,sBAAsBA,CAACrF,KAAK,EAAE8C,QAAQ,EAAE;IACpC,MAAMkD,cAAc,GAAG;MACnBT,OAAO,EAAE,CACL,wBAAwB,EACxB,qBAAqB,EACrB,oBAAoB,EACpB,qBAAqB,CACxB;MACDC,MAAM,EAAE,CACJ,iBAAiB,EACjB,cAAc,EACd,aAAa,EACb,aAAa,CAChB;MACDC,OAAO,EAAE,CACL,mBAAmB,EACnB,eAAe,EACf,aAAa,EACb,aAAa;IAErB,CAAC;IAED,OAAOO,cAAc,CAAChG,KAAK,CAAC,IAAIgG,cAAc,CAACT,OAAO;EAC1D;;EAEA;EACAU,mBAAmBA,CAACxB,KAAK,EAAEzE,KAAK,EAAE;IAC9B,OAAO;MACHkG,iBAAiB,EAAE,IAAI,CAACC,yBAAyB,CAAC1B,KAAK,EAAEzE,KAAK,CAAC;MAC/D4D,eAAe,EAAE,IAAI,CAACwC,uBAAuB,CAACpG,KAAK,CAAC;MACpD8D,aAAa,EAAE,IAAI,CAACC,gBAAgB,CAAC/D,KAAK;IAC9C,CAAC;EACL;;EAEA;EACAmG,yBAAyBA,CAACE,aAAa,EAAErG,KAAK,EAAE;IAC5C,MAAMkE,YAAY,GAAG,EAAE;IACvB,MAAM7C,SAAS,GAAG,IAAI,CAACqD,mBAAmB,CAAC1E,KAAK,CAAC;IAEjD,KAAK,IAAIsG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MACxB,MAAMC,QAAQ,GAAG,IAAI,CAACC,cAAc,CAAC1F,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,IAAI,CAACwF,cAAc,CAACnE,MAAM,CAAC,CAAC;MAC5F,MAAMjD,QAAQ,GAAGiC,SAAS,CAACjC,QAAQ;MAEnC,IAAIqF,KAAK,GAAG8B,QAAQ,CAACE,OAAO,CAAC,YAAY,EAAGC,KAAK,IAAK;QAClD,OAAOtH,QAAQ,CAAC0B,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG5B,QAAQ,CAACiD,MAAM,CAAC,CAAC;MAChE,CAAC,CAAC;MAEF6B,YAAY,CAACZ,IAAI,CAACmB,KAAK,CAAC;IAC5B;IAEA,OAAOP,YAAY;EACvB;;EAEA;EACAkC,uBAAuBA,CAACpG,KAAK,EAAE;IAC3B,MAAMoE,IAAI,GAAG;MACTmB,OAAO,EAAE,CACL,iBAAiB,EACjB,gBAAgB,EAChB,cAAc,CACjB;MACDC,MAAM,EAAE,CACJ,aAAa,EACb,cAAc,EACd,aAAa,CAChB;MACDC,OAAO,EAAE,CACL,aAAa,EACb,cAAc,EACd,cAAc;IAEtB,CAAC;IAED,OAAOrB,IAAI,CAACpE,KAAK,CAAC,IAAIoE,IAAI,CAACmB,OAAO;EACtC;;EAEA;EACAxB,gBAAgBA,CAAC4C,YAAY,EAAE;IAC3B,MAAMC,aAAa,GAAG;MAClBrB,OAAO,EAAE,CAAC,QAAQ,EAAE,SAAS,CAAC;MAC9BC,MAAM,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC;MAC9BC,OAAO,EAAE,CAAC,SAAS,EAAE,QAAQ;IACjC,CAAC;IAED,OAAOmB,aAAa,CAACD,YAAY,CAAC,IAAI,EAAE;EAC5C;;EAEA;EACAE,sBAAsBA,CAAC7G,KAAK,EAAE;IAC1B,MAAM8G,QAAQ,GAAG;MACbvB,OAAO,EAAE;QACLwB,MAAM,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;QACzCC,KAAK,EAAE,CAAC,YAAY,EAAE,QAAQ,CAAC;QAC/BC,OAAO,EAAE,CAAC,QAAQ,EAAE,QAAQ,EAAE,QAAQ;MAC1C,CAAC;MACDzB,MAAM,EAAE;QACJuB,MAAM,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;QACzCC,KAAK,EAAE,CAAC,UAAU,EAAE,QAAQ,CAAC;QAC7BC,OAAO,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM;MACrC,CAAC;MACDxB,OAAO,EAAE;QACLsB,MAAM,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;QACzCC,KAAK,EAAE,CAAC,SAAS,EAAE,UAAU,CAAC;QAC9BC,OAAO,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM;MACpC;IACJ,CAAC;IAED,OAAOH,QAAQ,CAAC9G,KAAK,CAAC,IAAI8G,QAAQ,CAACvB,OAAO;EAC9C;;EAEA;EACAnE,mBAAmBA,CAACqD,KAAK,EAAEzE,KAAK,EAAEC,IAAI,EAAE;IACpC,OAAO;MACHiH,cAAc,EAAE;QACZpC,KAAK,EAAE,KAAK9E,KAAK,QAAQ;QACzBgF,KAAK,EAAE,GAAGP,KAAK,iBAAiB;QAChCS,OAAO,EAAE,cAAc;QACvBE,MAAM,EAAE,CAAC,QAAQ;MACrB,CAAC;MACD5E,WAAW,EAAE;QACT0F,iBAAiB,EAAE,CAAC,WAAW,CAAC;QAChCtC,eAAe,EAAE,CAAC,OAAO,CAAC;QAC1BE,aAAa,EAAE;MACnB,CAAC;MACDqD,cAAc,EAAE;QACZJ,MAAM,EAAE,CAAC,SAAS,CAAC;QACnBC,KAAK,EAAE,CAAC,MAAM,CAAC;QACfC,OAAO,EAAE,CAAC,MAAM;MACpB,CAAC;MACDpG,UAAU,EAAE,EAAE;MACdI,WAAW,EAAE;IACjB,CAAC;EACL;;EAEA;EACA,MAAMmG,mBAAmBA,CAACpH,KAAK,EAAEqH,IAAI,EAAEhF,MAAM,GAAG,CAAC,EAAE;IAC/C,IAAI;MACA,MAAM,IAAIlC,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,GAAG,CAAC,CAAC;MAEtD,MAAMiB,SAAS,GAAG,IAAI,CAACqD,mBAAmB,CAAC1E,KAAK,CAAC;MACjD,MAAMsH,MAAM,GAAG,EAAE;MAEjB,KAAK,IAAIhB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGjE,MAAM,EAAEiE,CAAC,EAAE,EAAE;QAC7B,MAAMC,QAAQ,GAAG,IAAI,CAACC,cAAc,CAAC1F,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,IAAI,CAACwF,cAAc,CAACnE,MAAM,CAAC,CAAC;QAC5F,MAAMjD,QAAQ,GAAGiC,SAAS,CAACjC,QAAQ;QAEnC,IAAIqF,KAAK,GAAG8B,QAAQ,CAACE,OAAO,CAAC,YAAY,EAAE,MAAM;UAC7C,OAAOrH,QAAQ,CAAC0B,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG5B,QAAQ,CAACiD,MAAM,CAAC,CAAC;QAChE,CAAC,CAAC;QAEFiF,MAAM,CAAChE,IAAI,CAAC;UACRiE,IAAI,EAAE9C,KAAK;UACXzE,KAAK,EAAEA,KAAK;UACZa,UAAU,EAAEC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE;UAC/CwG,UAAU,EAAE1G,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,GAAG;QAC9C,CAAC,CAAC;MACN;MAEA,OAAOsG,MAAM,CAACG,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAAC9G,UAAU,GAAG6G,CAAC,CAAC7G,UAAU,CAAC;IAE7D,CAAC,CAAC,OAAOK,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACjC,OAAO,EAAE;IACb;EACJ;;EAEA;EACA,MAAM0G,YAAYA,CAACnD,KAAK,EAAE;IACtB,IAAI;MACA,MAAM,IAAItE,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,GAAG,CAAC,CAAC;MAEtD,MAAMyH,QAAQ,GAAG;QACbC,SAAS,EAAE,IAAI,CAACC,gBAAgB,CAACtD,KAAK,CAAC;QACvCuD,MAAM,EAAE,IAAI,CAACC,YAAY,CAACxD,KAAK,CAAC;QAChCyD,eAAe,EAAEpH,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE;QACpDR,WAAW,EAAE,IAAI,CAAC2H,8BAA8B,CAAC1D,KAAK,CAAC;QACvDrF,QAAQ,EAAE,IAAI,CAACgJ,eAAe,CAAC3D,KAAK;MACxC,CAAC;MAED,OAAOoD,QAAQ;IAEnB,CAAC,CAAC,OAAO3G,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;MAC/B,OAAO,IAAI;IACf;EACJ;;EAEA;EACA6G,gBAAgBA,CAACtD,KAAK,EAAE;IACpB,MAAM4D,aAAa,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IACtE,MAAMC,aAAa,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IAE9C,IAAIC,QAAQ,GAAG,CAAC;IAChB,IAAIC,QAAQ,GAAG,CAAC;IAEhBH,aAAa,CAACnF,OAAO,CAACuF,IAAI,IAAI;MAC1B,IAAIhE,KAAK,CAACiE,QAAQ,CAACD,IAAI,CAAC,EAAEF,QAAQ,EAAE;IACxC,CAAC,CAAC;IAEFD,aAAa,CAACpF,OAAO,CAACuF,IAAI,IAAI;MAC1B,IAAIhE,KAAK,CAACiE,QAAQ,CAACD,IAAI,CAAC,EAAED,QAAQ,EAAE;IACxC,CAAC,CAAC;IAEF,IAAID,QAAQ,GAAGC,QAAQ,EAAE,OAAO,UAAU;IAC1C,IAAIA,QAAQ,GAAGD,QAAQ,EAAE,OAAO,UAAU;IAC1C,OAAO,SAAS;EACpB;;EAEA;EACAN,YAAYA,CAACxD,KAAK,EAAE;IAChB,MAAMuD,MAAM,GAAG,EAAE;IAEjBW,MAAM,CAACC,IAAI,CAAC,IAAI,CAAClE,mBAAmB,CAAC,CAACxB,OAAO,CAAClD,KAAK,IAAI;MACnD,MAAMZ,QAAQ,GAAG,IAAI,CAACsF,mBAAmB,CAAC1E,KAAK,CAAC,CAACZ,QAAQ;MACzD,MAAMyJ,OAAO,GAAGzJ,QAAQ,CAAC0J,MAAM,CAACxD,OAAO,IAAIb,KAAK,CAACiE,QAAQ,CAACpD,OAAO,CAAC,CAAC;MAEnE,IAAIuD,OAAO,CAACxG,MAAM,GAAG,CAAC,EAAE;QACpB2F,MAAM,CAAC1E,IAAI,CAAC;UACRtD,KAAK,EAAEA,KAAK;UACZa,UAAU,EAAGgI,OAAO,CAACxG,MAAM,GAAGjD,QAAQ,CAACiD,MAAM,GAAI,GAAG;UACpD0G,eAAe,EAAEF;QACrB,CAAC,CAAC;MACN;IACJ,CAAC,CAAC;IAEF,OAAOb,MAAM,CAACP,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAAC9G,UAAU,GAAG6G,CAAC,CAAC7G,UAAU,CAAC;EAC7D;;EAEA;EACAuH,eAAeA,CAAC3D,KAAK,EAAE;IACnB,MAAMuE,WAAW,GAAGL,MAAM,CAACM,MAAM,CAAC,IAAI,CAACvE,mBAAmB,CAAC,CACtDwE,OAAO,CAAClJ,KAAK,IAAIA,KAAK,CAACZ,QAAQ,CAAC;IAErC,OAAO4J,WAAW,CAACF,MAAM,CAACxD,OAAO,IAAIb,KAAK,CAACiE,QAAQ,CAACpD,OAAO,CAAC,CAAC;EACjE;;EAEA;EACA6C,8BAA8BA,CAAC1D,KAAK,EAAE;IAClC,MAAMjE,WAAW,GAAG,EAAE;IAEtB,IAAIiE,KAAK,CAACpC,MAAM,GAAG,EAAE,EAAE;MACnB7B,WAAW,CAAC8C,IAAI,CAAC,kBAAkB,CAAC;IACxC;IAEA,IAAImB,KAAK,CAACpC,MAAM,GAAG,EAAE,EAAE;MACnB7B,WAAW,CAAC8C,IAAI,CAAC,gBAAgB,CAAC;IACtC;IAEA,IAAI,CAACmB,KAAK,CAACiE,QAAQ,CAAC,GAAG,CAAC,IAAI,CAACjE,KAAK,CAACiE,QAAQ,CAAC,GAAG,CAAC,EAAE;MAC9ClI,WAAW,CAAC8C,IAAI,CAAC,mBAAmB,CAAC;IACzC;IAEA,MAAMlE,QAAQ,GAAG,IAAI,CAACgJ,eAAe,CAAC3D,KAAK,CAAC;IAC5C,IAAIrF,QAAQ,CAACiD,MAAM,KAAK,CAAC,EAAE;MACvB7B,WAAW,CAAC8C,IAAI,CAAC,oBAAoB,CAAC;IAC1C;IAEA,OAAO9C,WAAW;EACtB;AACJ;;AAEA;AACA,OAAO,MAAM2I,SAAS,GAAG,IAAIxK,SAAS,CAAC,CAAC;AACxC,eAAeA,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}